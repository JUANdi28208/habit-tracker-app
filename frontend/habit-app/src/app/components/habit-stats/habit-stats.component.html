<div class="modal-backdrop" *ngIf="habit" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h4 class="mb-0">
        <span [style.color]="habit.color">●</span> Estadísticas de {{ habit.name }}
      </h4>
      <button class="btn-close" (click)="closeModal()" aria-label="Close">✕</button>
    </div>

    <div class="modal-body" *ngIf="stats">
      <!-- Cards de estadísticas -->
      <div class="row g-3 mb-4">
        <div class="col-md-6">
          <div class="stat-card text-center">
            <div class="stat-icon">🔥</div>
            <div class="stat-number text-warning">{{ stats.current_streak }}</div>
            <div class="stat-label">Racha Actual</div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="stat-card text-center">
            <div class="stat-icon">🏆</div>
            <div class="stat-number text-success">{{ stats.longest_streak }}</div>
            <div class="stat-label">Mejor Racha</div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="stat-card text-center">
            <div class="stat-icon">✓</div>
            <div class="stat-number text-primary">{{ stats.total_logs }}</div>
            <div class="stat-label">Total Completados</div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="stat-card text-center">
            <div class="stat-icon">📊</div>
            <div class="stat-number text-info">{{ stats.completion_rate }}%</div>
            <div class="stat-label">Tasa de Cumplimiento</div>
          </div>
        </div>
      </div>

      <!-- Información adicional -->
      <div class="info-card" *ngIf="stats.last_completed">
        <p class="mb-0">
          <strong>Última vez completado:</strong> 
          {{ stats.last_completed | date:'fullDate' }}
        </p>
      </div>

      <div class="info-card" *ngIf="!stats.last_completed">
        <p class="mb-0 text-muted">
          Aún no has completado este hábito. ¡Comienza hoy!
        </p>
      </div>
    </div>

    <div class="modal-body text-center" *ngIf="loading">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-3 text-muted">Cargando estadísticas...</p>
    </div>

    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="closeModal()">
        Cerrar
      </button>
    </div>
  </div>
</div>